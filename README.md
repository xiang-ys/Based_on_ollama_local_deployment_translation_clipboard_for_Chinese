# Ollama å‰ªè´´æ¿ç¿»è¯‘å™¨

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)
[![Ollama](https://img.shields.io/badge/Ollama-0.1.0+-orange)](https://ollama.ai)

ä¸€ä¸ªåŸºäº Ollama æœ¬åœ° AI æ¨¡å‹çš„å‰ªè´´æ¿ç¿»è¯‘å·¥å…·ï¼Œæ”¯æŒå®æ—¶ç›‘æ§ã€æ™ºèƒ½ç¼“å­˜å’Œé«˜æ•ˆç¿»è¯‘ã€‚

![ä¸»ç•Œé¢](assets/main_window.png)

## åŠŸèƒ½æ¼”ç¤º
| ç›‘æ§çŠ¶æ€ | ç¿»è¯‘å¼¹çª— |
|----------|----------|
| ![ç›‘æ§ä¸­](assets/window.png) | ![ç¿»è¯‘ç»“æœ](assets/translation_popup.png) |

## åŠŸèƒ½ç‰¹ç‚¹

âœ¨ **æ ¸å¿ƒåŠŸèƒ½**
- å®æ—¶ç›‘æ§å‰ªè´´æ¿å†…å®¹å˜åŒ–
- è°ƒç”¨æœ¬åœ° Ollama æ¨¡å‹è¿›è¡Œç¿»è¯‘
- æ™ºèƒ½è¯†åˆ«ä¸­è‹±æ–‡é¿å…é‡å¤ç¿»è¯‘
- ç¿»è¯‘ç»“æœå¼¹çª—æ˜¾ç¤ºï¼ˆå§‹ç»ˆç½®é¡¶ï¼‰

âš¡ **æ€§èƒ½ä¼˜åŒ–**
- é˜²æŠ–èŠ‚æµåŒé‡æ§åˆ¶ï¼ˆ200ms/500msï¼‰
- LRU ç¼“å­˜æœ€è¿‘ 100 æ¡ç¿»è¯‘ç»“æœ
- ä¼˜åŒ–çš„ä¸­æ–‡æ£€æµ‹ç®—æ³•
- å¼‚æ­¥å¤„ç†ä¸é˜»å¡ä¸»ç•Œé¢

ğŸ›¡ï¸ **ç¨³å®šå¯é **
- è‡ªåŠ¨æ£€æµ‹ Ollama æœåŠ¡çŠ¶æ€
- æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶ï¼ˆæœ€å¤§3æ¬¡ï¼‰
- è¯¦å°½çš„é”™è¯¯æ—¥å¿—è®°å½•
- å´©æºƒåè‡ªåŠ¨æ¢å¤

## å®‰è£…æŒ‡å—

### å‰ç½®è¦æ±‚
1. å®‰è£… [Ollama](https://ollama.ai) å¹¶è‡³å°‘ä¸‹è½½ä¸€ä¸ªæ¨¡å‹ï¼š
   ```bash
   ollama pull llama3
   ```
2. Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬

### å®‰è£…æ­¥éª¤
1. å…‹éš†ä»“åº“ï¼š
   ```bash
   git clone https://github.com/xiang-ys/Based_on_ollama_local_deployment_translation_clipboard_for_Chinese.git
   cd ollama-translator
   ```

2. å®‰è£…ä¾èµ–ï¼š
   ```bash
   pip install -r requirements.txt
   ```

3. å¯åŠ¨ Ollama æœåŠ¡ï¼ˆå¦‚æœå°šæœªè¿è¡Œï¼‰ï¼š
   ```bash
   ollama serve
   ```

4. è¿è¡Œç¿»è¯‘å™¨ï¼š
   ```bash
   python translator_gui.py
   ```

## ä½¿ç”¨æ–¹æ³•

1. **ä¸»ç•Œé¢æ“ä½œ**ï¼š
   - ä»ä¸‹æ‹‰èœå•é€‰æ‹© Ollama æ¨¡å‹
   - ç‚¹å‡»"å¼€å§‹ç›‘æ§"æŒ‰é’®
   - é€šè¿‡æ—¥å¿—é¢æ¿æŸ¥çœ‹å®æ—¶çŠ¶æ€

2. **ç¿»è¯‘æµç¨‹**ï¼š
   1. å¤åˆ¶ä»»æ„æ–‡æœ¬åˆ°å‰ªè´´æ¿
   2. ç­‰å¾… 200-500msï¼ˆé˜²æŠ–èŠ‚æµï¼‰
   3. å¼¹çª—æ˜¾ç¤ºç¿»è¯‘ç»“æœ
   4. é€‰æ‹©"å¤åˆ¶"æˆ–"å…³é—­"

3. **å¿«æ·é”®å»ºè®®**ï¼š
   - æ¨èæ­é…ç³»ç»Ÿå‰ªè´´æ¿ç®¡ç†å™¨ä½¿ç”¨
   - å¯ç»‘å®šå…¨å±€å¿«æ·é”®å¿«é€Ÿå”¤å‡º

## é«˜çº§é…ç½®

é€šè¿‡ä¿®æ”¹æºç ä¸­çš„å¸¸é‡å€¼è‡ªå®šä¹‰è¡Œä¸ºï¼š

```python
# æ€§èƒ½å‚æ•°
CHECK_INTERVAL = 0.1     # å‰ªè´´æ¿æ£€æŸ¥é—´éš”(ç§’)
DEBOUNCE_DELAY = 200     # é˜²æŠ–å»¶è¿Ÿ(æ¯«ç§’)
THROTTLE_DELAY = 500     # èŠ‚æµé—´éš”(æ¯«ç§’)

# èµ„æºæ§åˆ¶
MAX_CACHE_SIZE = 100     # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°
MAX_RETRIES = 3          # æœ€å¤§é‡è¯•æ¬¡æ•°
```

## å¸¸è§é—®é¢˜

â“ **å¼¹çª—æ²¡æœ‰å‡ºç°**
- æ£€æŸ¥ Ollama æœåŠ¡æ˜¯å¦è¿è¡Œ
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `translation_log.txt`
- ç¡®ä¿æ²¡æœ‰é˜²ç«å¢™é˜»æ­¢æœ¬åœ°11434ç«¯å£

â“ **ç¿»è¯‘ç»“æœä¸å‡†ç¡®**
- å°è¯•æ›´æ¢æ›´å¤§/æ›´ä¸“ä¸šçš„æ¨¡å‹
- æ£€æŸ¥æ¨¡å‹æ˜¯å¦å®Œæ•´ä¸‹è½½ï¼š
  ```bash
  ollama list
  ```

â“ **CPU/å†…å­˜å ç”¨é«˜**
- é™ä½ç›‘æ§é¢‘ç‡ï¼ˆå¢å¤§ CHECK_INTERVALï¼‰
- ä½¿ç”¨æ›´å°çš„æ¨¡å‹
- å‡å°‘ç¼“å­˜å¤§å°

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue æˆ– PRï¼å»ºè®®è´¡çŒ®æ–¹å‘ï¼š
- æ·»åŠ æ›´å¤šè¯­è¨€æ”¯æŒ
- å®ç°é…ç½®æ–‡ä»¶ç³»ç»Ÿ
- å¼€å‘æ‰“åŒ…ç‰ˆæœ¬ï¼ˆå¦‚.exe/.dmgï¼‰

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)

---
> ç”± [xiang_ys] å¼€å‘ Â· [æŠ¥å‘Šé—®é¢˜](https://github.com/xiang-ys/Based_on_ollama_local_deployment_translation_clipboard_for_Chinese.git)